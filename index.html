<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Annotatethrift by atlas555</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Annotatethrift</h1>
      <h2 class="project-tagline">注释java版本的thrift源码</h2>
      <a href="https://github.com/atlas555/annotateThrift" class="btn">View on GitHub</a>
      <a href="https://github.com/atlas555/annotateThrift/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/atlas555/annotateThrift/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="annotatethrift" class="anchor" href="#annotatethrift" aria-hidden="true"><span class="octicon octicon-link"></span></a>annotateThrift</h1>

<p>本项目的目的是对thrif源码进行注解，希望以<code>注解的方式</code>来理、认识thrift！</p>

<h2>
<a id="读代码之前你需要知道的" class="anchor" href="#%E8%AF%BB%E4%BB%A3%E7%A0%81%E4%B9%8B%E5%89%8D%E4%BD%A0%E9%9C%80%E8%A6%81%E7%9F%A5%E9%81%93%E7%9A%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>读代码之前你需要知道的</h2>

<h3>
<a id="1-什么是rpc以及rpc的结构" class="anchor" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFrpc%E4%BB%A5%E5%8F%8Arpc%E7%9A%84%E7%BB%93%E6%9E%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. 什么是RPC，以及RPC的结构</h3>

<p>（1）什是rpc</p>

<p>（2）rpc结构</p>

<p>（本小节摘自 <a href="http://mindwind.me/blog/2014/09/22/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BARPC%E2%80%94%E2%80%94%E6%B7%B1%E5%85%A5%E7%AF%87.html">mindwind.me</a>）</p>

<p><img src="http://mindwind.me/assets/article_images/2014-09-22-1.svg" alt="rpc结构"></p>

<p>RPC 服务方通过 RpcServer 去导出（export）远程接口方法，而客户方通过 RpcClient 去引入（import）远程接口方法。 客户方像调用本地方法一样去调用远程接口方法，RPC 框架提供接口的代理实现，实际的调用将委托给代理 RpcProxy 。 代理封装调用信息并将调用转交给 RpcInvoker 去实际执行。 </p>

<p>在客户端的 RpcInvoker 通过连接器 RpcConnector 去维持与服务端的通道 RpcChannel， 并使用 RpcProtocol 执行协议编码（encode）并将编码后的请求消息通过通道发送给服务方。
RPC 服务端接收器 RpcAcceptor 接收客户端的调用请求，同样使用 RpcProtocol 执行协议解码（decode）。 解码后的调用信息传递给 RpcProcessor 去控制处理调用过程，最后再委托调用给 RpcInvoker 去实际执行并返回调用结果</p>

<h2>
<a id="thrif代码结构" class="anchor" href="#thrif%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>thrif代码结构</h2>

<p>thrift 源码的结构如下：</p>

<ul>
<li>meta_data</li>
<li>transport</li>
<li>protocol</li>
<li>server</li>
<li>async</li>
<li>scheme<br>
</li>
<li>ex..</li>
</ul>

<h3>
<a id="meta_data" class="anchor" href="#meta_data" aria-hidden="true"><span class="octicon octicon-link"></span></a>meta_data</h3>

<p>对应的，thrift结构如下：</p>

<ul>
<li>TProtocol 协议和编解码组件</li>
<li>TTransport 传输组件</li>
<li>TProcessor 服务调用组件</li>
<li>TServer，Client 服务器和客户端组件</li>
<li>IDL 服务描述组件，负责生产跨平台客户端</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/atlas555/annotateThrift">Annotatethrift</a> is maintained by <a href="https://github.com/atlas555">atlas555</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-43475675-7");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>

